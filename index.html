<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Waseem & Rifu | Eternal Love</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;600&family=Dancing+Script:wght@500;700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            /* Deep Romantic Gradient */
            --bg-start: #1e0c1b;
            --bg-end: #0a0406;
            --text-main: #FDF0F3;
            --text-mute: #D4A5B0;
            --accent-gold: #E6C288;
            --accent-rose: #FF4D6D;
            --glass: rgba(255, 255, 255, 0.05);
            --border: 1px solid rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            cursor: default;
        }

        html,
        body {
            width: 100vw;
            overflow-x: hidden;
            /* CRITICAL: No horizontal scroll on body */
            min-height: 100vh;
            background: linear-gradient(to bottom, var(--bg-start), var(--bg-end));
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        h1,
        h2,
        h3 {
            font-family: 'Playfair Display', serif;
        }

        button {
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* Anti-Gravity Canvas */
        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        /* --- HAPPY VALENTINE'S RIFU OVERLAY --- */
        #rifu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0406;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 2s ease;
        }

        .rifu-title {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(2.5rem, 8vw, 5rem);
            background: linear-gradient(to right, #FF4D6D, #E6C288, #FF4D6D);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% auto;
            animation: shine 3s linear infinite;
            text-align: center;
            margin-bottom: 30px;
        }

        @keyframes shine {
            to {
                background-position: 200% center;
            }
        }

        .start-btn {
            background: transparent;
            border: 2px solid var(--accent-rose);
            color: var(--accent-rose);
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 50px;
            font-family: 'Playfair Display', serif;
            letter-spacing: 2px;
            transition: 0.3s;
            animation: pulse 2s infinite;
            margin-top: 20px;
        }

        .start-btn:hover {
            background: var(--accent-rose);
            color: white;
            transform: scale(1.1);
        }


        /* Music Player */
        .music-player {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 340px;
            background: rgba(30, 12, 27, 0.8);
            backdrop-filter: blur(12px);
            padding: 8px 15px;
            border-radius: 50px;
            border: var(--border);
            z-index: 8000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            transition: 0.3s;
            opacity: 0;
            /* Hidden initially */
        }

        .music-player.visible {
            opacity: 1;
        }

        .music-info {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.85rem;
        }

        .music-icon {
            color: var(--accent-rose);
            animation: pulse 2s infinite;
        }

        .play-btn {
            background: var(--accent-rose);
            color: white;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.9rem;
        }

        .container {
            width: 90%;
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 10;
        }

        /* Animation */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        /* Main content hidden until start */
        #main-content {
            opacity: 0;
            transition: opacity 1s ease;
            pointer-events: none;
        }

        #main-content.visible {
            opacity: 1;
            pointer-events: all;
        }

        /* Hero */
        .hero {
            height: 90vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .hero h1 {
            font-size: clamp(2rem, 6vw, 3rem);
            color: var(--accent-gold);
            margin-bottom: 20px;
        }

        .big-counter {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .count-box {
            background: rgba(255, 255, 255, 0.03);
            border: var(--border);
            padding: 20px 40px;
            border-radius: 15px;
            text-align: center;
        }

        .c-val {
            font-family: 'Playfair Display';
            font-size: clamp(2.5rem, 8vw, 4rem);
            display: block;
            color: var(--text-main);
            font-weight: 700;
        }

        .c-lbl {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--text-mute);
        }

        .subtitle {
            letter-spacing: 3px;
            text-transform: uppercase;
            color: var(--accent-rose);
            font-size: 0.9rem;
            margin-top: 20px;
        }

        /* Roadmap */
        .roadmap-sec {
            padding: 60px 0;
        }

        .sec-title {
            text-align: center;
            font-size: 2.5rem;
            color: var(--accent-gold);
            margin-bottom: 40px;
        }

        .timeline {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
            border-left: 4px solid rgba(255, 77, 109, 0.2);
            padding-left: 40px;
        }

        .t-event {
            position: relative;
            padding-bottom: 80px;
            opacity: 0;
            transform: translateY(30px);
            transition: 0.8s ease-out;
        }

        .t-event.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .t-event::before {
            content: '';
            position: absolute;
            left: -51px;
            top: 0;
            width: 18px;
            height: 18px;
            background: var(--bg-start);
            border: 4px solid var(--accent-rose);
            border-radius: 50%;
            box-shadow: 0 0 0 4px rgba(255, 77, 109, 0.2);
        }

        .t-date {
            color: var(--accent-rose);
            font-size: 0.9rem;
            letter-spacing: 1px;
            margin-bottom: 5px;
            display: block;
            text-transform: uppercase;
        }

        .t-event h3 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .t-event p {
            color: var(--text-mute);
            line-height: 1.6;
            font-size: 1.05rem;
        }

        /* --- CAROUSEL SECTION --- */
        .carousel-sec {
            padding: 40px 0 80px 0;
            position: relative;
            z-index: 20;
        }

        .carousel-container {
            display: flex;
            gap: 40px;
            overflow-x: auto;
            /* Horizontal Scroll */
            padding: 40px 20px;
            /* Padding for shadows */
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            /* Firefox */
        }

        .carousel-container::-webkit-scrollbar {
            display: none;
            /* Chrome/Safari */
        }

        .polaroid {
            flex: 0 0 280px;
            /* Fixed Width */
            scroll-snap-align: center;
            background: white;
            padding: 15px 15px 50px 15px;
            /* Classic styling */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s;
            cursor: pointer;
            position: relative;
        }

        .polaroid:hover {
            transform: scale(1.05) rotate(0deg) !important;
            z-index: 50;
        }

        .p-img {
            width: 100%;
            height: 350px;
            /* Fixed Height */
            object-fit: cover;
            display: block;
            background: #eee;
        }

        /* Interactions */
        .interact-area {
            text-align: center;
            max-width: 600px;
            margin: 40px auto 100px auto;
            background: var(--glass);
            padding: 40px 20px;
            border-radius: 20px;
            border: var(--border);
        }

        .reply-box {
            margin-bottom: 40px;
        }

        .reply-input {
            width: 100%;
            height: 120px;
            background: rgba(255, 255, 255, 0.05);
            border: none;
            color: #fff;
            padding: 15px;
            border-radius: 10px;
            font-family: 'Inter';
            font-size: 1rem;
            resize: none;
            outline: none;
            margin-bottom: 15px;
        }

        .submit-btn {
            background: transparent;
            border: 1px solid var(--accent-rose);
            color: var(--accent-rose);
            padding: 10px 25px;
            border-radius: 30px;
            font-size: 0.9rem;
            transition: 0.3s;
        }

        .submit-btn:hover {
            background: var(--accent-rose);
            color: white;
        }

        .val-btn {
            background: linear-gradient(135deg, #FF4D6D, #D6336C);
            color: white;
            padding: 20px 40px;
            border-radius: 50px;
            border: none;
            font-size: 1.2rem;
            font-weight: 600;
            box-shadow: 0 10px 40px rgba(214, 51, 108, 0.4);
            animation: pulse 2s infinite;
            width: 100%;
            max-width: 350px;
        }

        /* THE LOVE LETTER BUTTON */
        .love-letter-btn {
            display: block;
            margin: 0 auto 30px auto;
            background: linear-gradient(135deg, #E6C288, #D4A5B0);
            color: #1a0509;
            padding: 18px 45px;
            border-radius: 50px;
            font-family: 'Playfair Display', serif;
            font-size: 1.3rem;
            font-weight: 700;
            border: none;
            box-shadow: 0 0 25px rgba(230, 194, 136, 0.4);
            animation: pulse-glow 3s infinite;
            transition: transform 0.3s;
        }

        .love-letter-btn:hover {
            transform: translateY(-5px) scale(1.05);
        }

        @keyframes pulse-glow {
            0% {
                box-shadow: 0 0 25px rgba(230, 194, 136, 0.4);
            }

            50% {
                box-shadow: 0 0 45px rgba(230, 194, 136, 0.7);
            }

            100% {
                box-shadow: 0 0 25px rgba(230, 194, 136, 0.4);
            }
        }

        /* Modal - General */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 9000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: 0.4s;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        /* Carousel Modal Layout */
        .modal-carousel-content {
            background: #111;
            border: 1px solid #333;
            border-radius: 10px;
            width: 90%;
            max-width: 800px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            max-height: 90vh;
        }

        .m-img {
            width: 100%;
            height: 40vh;
            object-fit: cover;
        }

        .m-txt {
            padding: 30px;
            color: #eee;
            overflow-y: auto;
        }

        .m-title {
            font-family: 'Dancing Script';
            font-size: 2.2rem;
            color: var(--accent-rose);
            margin-bottom: 15px;
        }

        .m-desc {
            line-height: 1.8;
            color: #ccc;
            font-size: 1.1rem;
        }

        .m-close {
            margin-top: 20px;
            background: transparent;
            border: 1px solid #555;
            color: #888;
            padding: 8px 20px;
            width: fit-content;
        }

        /* LOVE LETTER MODAL */
        #letter-modal {
            background: rgba(10, 4, 6, 0.9);
            backdrop-filter: blur(20px);
        }

        #letter-content {
            width: 90%;
            max-width: 700px;
            height: 85vh;
            background: rgba(255, 255, 255, 0.05);
            /* Glass */
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #rising-hearts-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .letter-text-container {
            z-index: 5;
            text-align: center;
            overflow-y: auto;
            font-family: 'Inter', sans-serif;
            color: #fce4ec;
            padding-right: 10px;
            scrollbar-width: thin;
            scrollbar-color: var(--accent-rose) transparent;
        }

        .l-head {
            font-family: 'Dancing Script';
            font-size: 3rem;
            color: var(--accent-gold);
            margin-bottom: 30px;
        }

        .l-body {
            font-size: 1.15rem;
            line-height: 2;
            margin-bottom: 40px;
            white-space: pre-wrap;
        }

        .l-close {
            z-index: 10;
            background: transparent;
            border: 1px solid var(--accent-rose);
            color: var(--accent-rose);
            padding: 10px 30px;
            border-radius: 30px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
        }

        .l-close:hover {
            background: var(--accent-rose);
            color: white;
        }

        @media(min-width: 768px) {
            .hero {
                height: 80vh;
            }

            .big-counter {
                grid-template-columns: repeat(4, 1fr);
            }

            .modal-carousel-content {
                flex-direction: row;
                height: 500px;
            }

            .m-img {
                width: 50%;
                height: 100%;
            }

            .m-txt {
                width: 50%;
                display: flex;
                flex-direction: column;
                justify-content: center;
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }
    </style>
</head>

<body>

    <canvas id="particle-canvas"></canvas>

    <!-- RIFU ENTRANCE OVERLAY -->
    <div id="rifu-overlay">
        <h1 class="rifu-title">Happy Valentine's Day<br>Rifu</h1>
        <button class="start-btn" onclick="startExperience()">Start Our Story</button>
    </div>

    <!-- Music Player -->
    <div class="music-player" id="player">
        <div class="music-info">
            <div class="music-icon">‚ô•</div>
            <div>Kunjikaval Mekhame</div>
        </div>
        <button class="play-btn" id="play-btn">‚è∏</button> <!-- Initially playing once started -->
        <audio id="bg-music" loop>
            <source src="music.mp3" type="audio/mpeg">
        </audio>
    </div>

    <!-- MAIN SCROLL CONTAINER -->
    <div id="main-content">

        <!-- HERO -->
        <div class="container hero">
            <p class="subtitle" style="margin-bottom:10px;">My Universe</p>
            <h1>Since March 6, 2023</h1>
            <div class="big-counter">
                <div class="count-box"><span id="d" class="c-val">00</span><span class="c-lbl">Days</span></div>
                <div class="count-box"><span id="h" class="c-val">00</span><span class="c-lbl">Hours</span></div>
                <div class="count-box"><span id="m" class="c-val">00</span><span class="c-lbl">Minutes</span></div>
                <div class="count-box"><span id="s" class="c-val">00</span><span class="c-lbl">Seconds</span></div>
            </div>
            <p class="subtitle">Every second with you counts.</p>
        </div>

        <!-- ROADMAP -->
        <div class="container roadmap-sec">
            <h2 class="sec-title">Our Story</h2>
            <div class="timeline">
                <div class="t-event">
                    <span class="t-date">March 6, 2023 | 9th Grade</span>
                    <h3>The Beginning</h3>
                    <p>The day gravity shifted and I started floating.</p>
                </div>
                <div class="t-event">
                    <span class="t-date">First Movie</span>
                    <h3>Cinema Date</h3>
                    <p>In the dark, seeing only you.</p>
                </div>
                <div class="t-event">
                    <span class="t-date">Adventures</span>
                    <h3>Every Trip</h3>
                    <p>Anywhere with you is home.</p>
                </div>
                <div class="t-event">
                    <span class="t-date">Today, 2026</span>
                    <h3>Still Falling</h3>
                    <p>Loving you more than ever.</p>
                </div>
            </div>
        </div>

        <!-- CAROUSEL -->
        <div class="carousel-sec">
            <div class="container">
                <h2 class="sec-title">Moments of Us</h2>
            </div>
            <div class="carousel-container" id="carousel">
                <!-- All images from 'assests/' folder (Corrected for typo) -->

                <div class="polaroid"
                    onclick="openModal('9th Grade', 'Where it all started. Pure magic.', 'assests/20240331_201016.jpg')">
                    <img src="assests/20240331_201016.jpg" class="p-img">
                </div>

                <div class="polaroid"
                    onclick="openModal('That Smile', 'Sets my world straight.', 'assests/39279B16-A417-46B6-90A8-8802C99DDF6C.jpeg')">
                    <img src="assests/39279B16-A417-46B6-90A8-8802C99DDF6C.jpeg" class="p-img">
                </div>

                <div class="polaroid"
                    onclick="openModal('Laughter', 'My favorite melody.', 'assests/IMG-20240728-WA0028.jpg')">
                    <img src="assests/IMG-20240728-WA0028.jpg" class="p-img">
                </div>

                <div class="polaroid"
                    onclick="openModal('Travel', 'Every step is an adventure.', 'assests/IMG_20230624_230918.jpg')">
                    <img src="assests/IMG_20230624_230918.jpg" class="p-img">
                </div>

                <div class="polaroid"
                    onclick="openModal('Quiet', 'Peace in your presence.', 'assests/IMG_20230624_231025.jpg')">
                    <img src="assests/IMG_20230624_231025.jpg" class="p-img">
                </div>

                <div class="polaroid"
                    onclick="openModal('My Rock', 'Supporting me always.', 'assests/IMG_20240328_002353.jpg')">
                    <img src="assests/IMG_20240328_002353.jpg" class="p-img">
                </div>

                <div class="polaroid"
                    onclick="openModal('Crazy Us', 'We are weird, and I love it.', 'assests/IMG_20240526_162653 (1).jpg')">
                    <img src="assests/IMG_20240526_162653 (1).jpg" class="p-img">
                </div>

                <div class="polaroid"
                    onclick="openModal('Growth', 'Growing together.', 'assests/IMG_20231215_204758_284.HEIC.heif')">
                    <img src="assests/IMG_20231215_204758_284.HEIC.heif" class="p-img">
                </div>

                <div class="polaroid"
                    onclick="openModal('Trust', 'The strongest bond.', 'assests/IMG_20240526_162653.jpg')">
                    <img src="assests/IMG_20240526_162653.jpg" class="p-img">
                </div>

                <div class="polaroid"
                    onclick="openModal('Dreaming', 'Building our future.', 'assests/IMG_20251104_181015_968.jpg')">
                    <img src="assests/IMG_20251104_181015_968.jpg" class="p-img">
                </div>

            </div>
        </div>

        <!-- INTERACTIONS -->
        <div class="container interact-area">

            <!-- NEW LOVE LETTER BUTTON -->
            <button class="love-letter-btn" onclick="openLetter()">For My Love</button>

            <div class="reply-box">
                <h3 style="margin-bottom:15px; color:var(--text-main);">Write to Me, Rifu üíå</h3>
                <textarea class="reply-input" placeholder="Your specific message..."></textarea>
                <button class="submit-btn" onclick="sendReply(this)">Send My Love</button>
            </div>
            <button class="val-btn" onclick="askVal(this)">Will You Be My Valentine?</button>
        </div>

    </div>

    <!-- Modal (Carousel Details) -->
    <div class="modal" id="modal">
        <div class="modal-carousel-content">
            <img src="" class="m-img" id="m-img">
            <div class="m-txt">
                <div class="m-title" id="m-title">Title</div>
                <p class="m-desc" id="m-desc">Description</p>
                <button class="m-close" onclick="closeModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- LETTER MODAL (Waseem -> Rifa) -->
    <div class="modal" id="letter-modal">
        <div id="letter-content">
            <canvas id="rising-hearts-canvas"></canvas>
            <div class="letter-text-container">
                <div class="l-head">My Dearest Rifu</div>
                <div class="l-body">
                    Rifu, they say names have meanings, but to me, your name is just another word for "Home".

                    From those classrooms in 9th grade to this very moment in 2026, my heart has only ever spoken one
                    name: Yours.

                    Looking back at where we started‚Äîtwo kids just figuring out the world‚Äîit amazes me how far we've
                    come. We've grown up together, laughed together, and built a universe of memories that I wouldn't
                    trade for anything.

                    You are my rock, my best friend, and my greatest adventure. Every day I wake up grateful that I get
                    to call you mine. You are the best thing that has ever happened to me.

                    You are my soulmate, my forever, and every heartbeat belongs to you.

                    With all my love,
                    Waseem
                </div>
                <button class="l-close" onclick="closeLetter()">Close Letter</button>
            </div>
        </div>
    </div>

    <script>
        // Start Experience
        function startExperience() {
            const overlay = document.getElementById('rifu-overlay');
            const main = document.getElementById('main-content');
            const player = document.getElementById('player');
            const music = document.getElementById('bg-music');

            // Celebration
            confetti({ particleCount: 400, spread: 200, zIndex: 11000, colors: ['#FF4D6D', '#E6C288', '#ffffff'] });

            overlay.style.opacity = '0';
            setTimeout(() => { overlay.style.display = 'none'; }, 2000);

            main.classList.add('visible');
            player.classList.add('visible');

            // Attempt Audio Play
            music.volume = 0.5;
            music.play().catch(e => {
                console.log("Autoplay blocked, user interaction already happened.");
            });
        }

        // Simple Random Rotation for Hardcoded Polaroids
        function initRotations() {
            document.querySelectorAll('.polaroid').forEach(p => {
                const rot = (Math.random() * 6 - 3).toFixed(1);
                p.style.transform = `rotate(${rot}deg)`;
            });
        }
        initRotations();

        // Carousel Modal
        function openModal(t, d, s) {
            document.getElementById('m-title').innerText = t;
            document.getElementById('m-desc').innerText = d;
            document.getElementById('m-img').src = s;
            document.getElementById('modal').classList.add('active');
        }
        function closeModal() { document.getElementById('modal').classList.remove('active'); }

        // Letter Modal Logic
        let letterAnimFrame;
        function openLetter() {
            document.getElementById('letter-modal').classList.add('active');
            initRisingHearts();
        }
        function closeLetter() {
            document.getElementById('letter-modal').classList.remove('active');
            cancelAnimationFrame(letterAnimFrame);
        }

        // Rising Hearts Animation inside Letter
        function initRisingHearts() {
            const cvs = document.getElementById('rising-hearts-canvas');
            const c = cvs.getContext('2d');
            cvs.width = cvs.offsetWidth; cvs.height = cvs.offsetHeight;
            const hearts = [];

            class Heart {
                constructor() {
                    this.x = Math.random() * cvs.width;
                    this.y = cvs.height + 10;
                    this.s = Math.random() * 15 + 5; // Size
                    this.sy = Math.random() * 1 + 0.5; // Speed
                    this.o = Math.random() * 0.5 + 0.3; // Opacity
                }
                update() {
                    this.y -= this.sy;
                    this.o -= 0.002;
                }
                draw() {
                    c.globalAlpha = Math.max(0, this.o);
                    c.font = this.s + "px serif";
                    c.fillStyle = "#FF4D6D";
                    c.fillText("‚ù§", this.x, this.y);
                }
            }

            function animate() {
                c.clearRect(0, 0, cvs.width, cvs.height);
                if (Math.random() < 0.1) hearts.push(new Heart()); // Add new heart occas.
                for (let i = 0; i < hearts.length; i++) {
                    hearts[i].update();
                    hearts[i].draw();
                    if (hearts[i].y < -20 || hearts[i].o <= 0) {
                        hearts.splice(i, 1); i--;
                    }
                }
                letterAnimFrame = requestAnimationFrame(animate);
            }
            animate();
        }

        // Interactions
        function sendReply(btn) {
            confetti({ particleCount: 200, spread: 100, origin: { y: 0.8 }, colors: ['#FF4D6D', '#FFF'] });
            btn.innerText = "Success! Letter Sent! üíå";
            btn.style.background = "#4DFF91";
            btn.style.color = "#005726";
            btn.style.border = "none";
        }
        function askVal(btn) {
            confetti({ particleCount: 300, spread: 150, zIndex: 10000 });
            btn.innerText = "YES! I Love You! üåπ";
            btn.style.background = "#fff";
            btn.style.color = "#E91E63";
            btn.style.animation = "none";
        }

        // Logic
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); });
        }, { threshold: 0.2 });
        document.querySelectorAll('.t-event').forEach(el => observer.observe(el));

        const start = new Date('2023-03-06T00:00:00');
        setInterval(() => {
            const now = new Date(); const d = now - start;
            document.getElementById('d').innerText = Math.floor(d / 86400000);
            document.getElementById('h').innerText = Math.floor((d % 86400000) / 3600000);
            document.getElementById('m').innerText = Math.floor((d % 3600000) / 60000);
            document.getElementById('s').innerText = Math.floor((d % 60000) / 1000);
        }, 1000);

        const playBtn = document.getElementById('play-btn');
        const audio = document.getElementById('bg-music');
        let playing = true; // Assumed playing after start button
        playBtn.addEventListener('click', () => {
            if (playing) { audio.pause(); playBtn.innerText = "‚ñ∂"; }
            else { audio.play(); playBtn.innerText = "‚è∏"; }
            playing = !playing;
        });

        // Background Particles
        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        const pArray = [];
        class P {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.s = Math.random() * 2 + 1;
                this.sy = Math.random() * 0.5 + 0.3;
                this.c = Math.random() > 0.5 ? '#E6C288' : '#FF4D6D';
            }
            update() {
                this.y -= this.sy;
                if (this.y < -10) { this.y = canvas.height + 10; this.x = Math.random() * canvas.width; }
            }
            draw() {
                ctx.fillStyle = this.c; ctx.globalAlpha = 0.6;
                ctx.beginPath(); ctx.arc(this.x, this.y, this.s, 0, Math.PI * 2); ctx.fill();
            }
        }
        for (let i = 0; i < 80; i++) pArray.push(new P());
        function anim() { ctx.clearRect(0, 0, canvas.width, canvas.height); pArray.forEach(p => { p.update(); p.draw() }); requestAnimationFrame(anim); }
        anim();
    </script>
</body>

</html>
